<ion-content [fullscreen]="true" class="home-content">
 
  <div class="background-gradient"></div>

 
  <div class="header-section">
    <div class="user-welcome">
      <div class="user-avatar">
        <ion-icon name="person-circle-outline"></ion-icon>
      </div>
      <div class="user-info">
        <h3>Welcome back!</h3>
        <p>{{ authService.currentUser()?.email }}</p>
      </div>
    </div>

    <div class="header-actions">
      <ion-button fill="clear" class="notification-btn">
        <ion-icon name="notifications-outline"></ion-icon>
      </ion-button>
      <ion-button fill="clear" (click)="logout()" class="logout-btn">
        <ion-icon name="log-out-outline"></ion-icon>
      </ion-button>
    </div>
  </div>

  
  <div class="stats-section">
    <div class="stats-grid">
      <div class="stat-card active-trips">
        <div class="stat-icon">
          <ion-icon name="car-outline"></ion-icon>
        </div>
        <div class="stat-info">
          <h4>{{ (trips$ | async)?.length || 0 }}</h4>
          <p>Active Trips</p>
        </div>
      </div>

      <!-- <div class="stat-card completed-trips">
        <div class="stat-icon">
          <ion-icon name="checkmark-circle-outline"></ion-icon>
        </div>
        <div class="stat-info">
          <h4>{{ getCompletedTripsCount() }}</h4>
          <p>Completed</p>
        </div>
      </div> -->

      <!-- <div class="stat-card pending-trips">
        <div class="stat-icon">
          <ion-icon name="time-outline"></ion-icon>
        </div>
        <div class="stat-info">
          <h4>{{ getPendingTripsCount() }}</h4>
          <p>Pending</p>
        </div>
      </div> -->

      <div class="stat-card total-distance">
        <div class="stat-icon">
          <ion-icon name="speedometer-outline"></ion-icon>
        </div>
        <div class="stat-info">
          <h4>{{ getTotalDistance() }}km</h4>
          <p>Total Distance</p>
        </div>
      </div>
    </div>
  </div>

 
  <div class="trips-section">
    <div class="section-header">
      <h2>Recent Trips</h2>
      <ion-button fill="clear" size="small" class="view-all-btn">
        View All
        <ion-icon name="chevron-forward" slot="end"></ion-icon>
      </ion-button>
    </div>

   
    <div class="loading-container" *ngIf="!(trips$ | async)">
      <div class="loading-card">
        <ion-spinner name="crescent" color="primary"></ion-spinner>
        <p>Loading your trips...</p>
      </div>
    </div>

   
    <div class="trips-list" *ngIf="trips$ | async as trips">
      <div class="trip-card" *ngFor="let trip of trips; trackBy: trackByTripId" (click)="viewTripDetails(trip)">
        <div class="trip-header">
          <div class="trip-reference">
            <h3>{{ trip.tripReference }}</h3>
            <span class="trip-status" [class]="'status-' + trip.tripStatus.toLowerCase()">
              {{ trip.tripStatus }}
            </span>
          </div>
          <ion-icon name="chevron-forward" class="trip-arrow"></ion-icon>
        </div>

        <div class="trip-details">
         
          <div class="trip-info-grid">
            <div class="info-card">
              <div class="info-icon calendar">
                <ion-icon name="calendar-outline"></ion-icon>
              </div>
              <div class="info-content">
                <span class="info-label">Start Date</span>
                <span class="info-value">{{ trip.estimatedStartDate | date:'MMM dd, yyyy' }}</span>
              </div>
            </div>

            <div class="info-card">
              <div class="info-icon time">
                <ion-icon name="time-outline"></ion-icon>
              </div>
              <div class="info-content">
                <span class="info-label">Duration</span>
                <span class="info-value">{{ trip.estimatedDuration }}h</span>
              </div>
            </div>

            <div class="info-card">
              <div class="info-icon distance">
                <ion-icon name="navigate-outline"></ion-icon>
              </div>
              <div class="info-content">
                <span class="info-label">Distance</span>
                <span class="info-value">{{ trip.estimatedDistance }}km</span>
              </div>
            </div>

            <div class="info-card" *ngIf="trip.truck">
              <div class="info-icon truck">
                <ion-icon name="car-outline"></ion-icon>
              </div>
              <div class="info-content">
                <span class="info-label">Vehicle</span>
                <span class="info-value">{{ trip.truck.immatriculation }}</span>
              </div>
            </div>
          </div>

         
          <div class="driver-section" *ngIf="trip.driver">
            <div class="driver-avatar">
              <ion-icon name="person-circle-outline"></ion-icon>
            </div>
            <div class="driver-info">
              <span class="driver-label">Driver</span>
              <span class="driver-name">{{ trip.driver.name }}</span>
            </div>
          </div>

          
          <div class="trip-progress" *ngIf="trip.tripStatus === 'InProgress'">
            <div class="progress-bar">
              <div class="progress-fill" [style.width.%]="getTripProgress(trip)"></div>
            </div>
            <span class="progress-text">{{ getTripProgress(trip) }}% Complete</span>
          </div>
        </div>
      </div>

      
      <div class="empty-state" *ngIf="trips.length === 0">
        <div class="empty-icon">
          <ion-icon name="car-outline"></ion-icon>
        </div>
        <h3>No trips found</h3>
        <p>You don't have any trips assigned yet.</p>
      </div>
    </div>
  </div>

  
  <!-- <div class="quick-actions">
    <ion-button expand="block" class="action-btn primary" routerLink="/trips">
      <ion-icon name="add-circle-outline" slot="start"></ion-icon>
      Start New Trip
    </ion-button>

    <div class="secondary-actions">
      <ion-button fill="outline" class="action-btn secondary">
        <ion-icon name="map-outline" slot="start"></ion-icon>
        View Routes
      </ion-button>

      <ion-button fill="outline" class="action-btn secondary">
        <ion-icon name="settings-outline" slot="start"></ion-icon>
        Settings
      </ion-button>
    </div>
  </div> -->
</ion-content>