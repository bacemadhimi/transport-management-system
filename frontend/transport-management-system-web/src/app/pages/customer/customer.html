<div class="customer-page">
  <div class="customer-header">
    <h1 class="customer-title">La liste des clients</h1>

    <div class="customer-header__actions">
      <div class="customer-header__left">
        <mat-form-field appearance="outline" floatLabel="always" class="customer-search">
          <input
            matInput
            type="text"
            [formControl]="searchControl"
            placeholder="Chercher client"
          />
        </mat-form-field>
<mat-form-field appearance="outline" class="customer-search">
  <mat-label>Source</mat-label>
  <mat-select
    [(ngModel)]="filter.sourceSystem"
    (selectionChange)="onSourceChange()">

    <mat-option [value]="null">Tous</mat-option>
    <mat-option value="TMS">TMS</mat-option>
    <mat-option value="QAD">QAD</mat-option>

  </mat-select>
</mat-form-field>

        <div class="export-actions" aria-label="Export actions">
          <button mat-icon-button class="export-btn export-excel" (click)="exportExcel()" title="Export Excel">
            <svg viewBox="0 0 24 24" class="export-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <rect x="2" y="3" width="20" height="18" rx="2" fill="#107C10"></rect>
              <text x="12" y="16" text-anchor="middle" font-size="10" font-weight="700" fill="#fff">XLS</text>
            </svg>
          </button>

          <button mat-icon-button class="export-btn export-csv" (click)="exportCSV()" title="Export CSV">
            <svg viewBox="0 0 24 24" class="export-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <rect x="2" y="3" width="20" height="18" rx="2" fill="#1E90FF"></rect>
              <text x="12" y="16" text-anchor="middle" font-size="9" font-weight="700" fill="#fff">CSV</text>
            </svg>
          </button>

          <button mat-icon-button class="export-btn export-pdf" (click)="exportPDF()" title="Export PDF">
            <svg viewBox="0 0 24 24" class="export-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <rect x="2" y="3" width="20" height="18" rx="2" fill="#D32F2F"></rect>
              <text x="12" y="16" text-anchor="middle" font-size="9" font-weight="700" fill="#fff">PDF</text>
            </svg>
          </button>
        </div>
      </div>

      <div class="customer-header__right">
        <button  *ngIf="auth.hasPermission('CUSTOMER_ADD')" mat-flat-button class="customer-add-btn" (click)="add()" type="button">
          Ajouter
        </button>
      </div>
    </div>
  </div>

  <app-table
    [PagedData]="pagedCustomerData"
    [pageIndex]="filter.pageIndex"
    [pageSize]="filter.pageSize"
    [displayedColumns]="showCols"
    (rowClick)="onRowClick($event)"
    (onPageChange)="pageChange($event)">
  </app-table>
</div>