<mat-card class="form-card p-8">
  <mat-card-title>
    {{ data.userId ? 'Modifier Utilisateur' : 'Ajouter Utilisateur' }}
  </mat-card-title>

  <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
    <mat-form-field class="w-full">
      <mat-label>Nom complet</mat-label>
      <input matInput formControlName="name" />
      <mat-error *ngIf="userForm.get('name')?.hasError('required')">Nom obligatoire</mat-error>
      <mat-error *ngIf="userForm.get('name')?.hasError('minlength')">Minimum 2 caractères</mat-error>
    </mat-form-field>

    

    <mat-form-field class="w-full">
      <mat-label>Email</mat-label>
      <input matInput formControlName="email" />
      <mat-error *ngIf="userForm.get('email')?.hasError('required')">Email obligatoire</mat-error>
      <mat-error *ngIf="userForm.get('email')?.hasError('email')">Format email invalide</mat-error>
    </mat-form-field>
<mat-form-field class="w-full">
  <mat-label>Rôle</mat-label>
  <mat-select formControlName="role">
    <mat-option *ngFor="let r of roles" [value]="r">{{ r }}</mat-option>
  </mat-select>
  <mat-error *ngIf="userForm.get('role')?.hasError('required')">
    Le rôle est obligatoire
  </mat-error>
</mat-form-field>

    <mat-form-field class="w-full">
      <mat-label>Téléphone</mat-label>
      <input matInput formControlName="phone" placeholder="Ex: 55123456" />
      <mat-error *ngIf="userForm.get('phone')?.hasError('required')">Téléphone obligatoire</mat-error>
      <mat-error *ngIf="userForm.get('phone')?.hasError('pattern')">Exactement 8 chiffres</mat-error>
    </mat-form-field>

    <mat-form-field class="w-full">
      <mat-label>Mot de passe</mat-label>
      <input matInput formControlName="password" type="password" />
      <mat-hint *ngIf="data.userId">Laisser vide pour ne pas modifier</mat-hint>
      <mat-error *ngIf="!data.userId && userForm.get('password')?.hasError('required')">Mot de passe obligatoire</mat-error>
      <mat-error *ngIf="!data.userId && userForm.get('password')?.hasError('minlength')">Minimum 6 caractères</mat-error>
    </mat-form-field>

    <mat-form-field class="w-full">
      <mat-label>Image de profil (URL)</mat-label>
      <input matInput formControlName="profileImage" />
    </mat-form-field>

    <div class="flex justify-center mt-4">
      <button mat-raised-button color="primary" type="submit" [disabled]="userForm.invalid">
        {{ data.userId ? 'Modifier' : 'Ajouter' }}
      </button>
      <button mat-button type="button" (click)="onCancel()">Annuler</button>
    </div>
  </form>
</mat-card>
